
Используемая схема данных:


Точки входа сервиса:
1. Вход  
  Для входа используется маршрут: "/auth/login" после успешной авторизации происходит перенаправление на основную страницу сервиса "/"  
  По маршруту 'myaccount' доступен личный кабинет, где можно увижеть и изменить данные учетной записи. Разрешены методы POST и PATCH  Тип учетной записи пользователю самостоятельно нельзя.
2. Регистрация  
для регистрации пользователей используется маршрут "/register/".  
На вход принимается json с данными для регистрации, вида:  
  {"username": "test_user10",
    "email": "test10@mail.com",
    "first_name": "test_lastname",
    "last_name": "test_name",
    "surname": "test_surname",
    "company": "test_company",
    "position": "test_position",
    "password": "test_password",
    "repeatpassword": "test_password"}  
  В проекте используется модифицированная модель CustomUser, где полем для входа является email. По умолчанию учетной записи присваивается тип - buyer. Изменить её на тип 'shop' можно только администратору ресурса.  
3. Список товаров  
Доступен по маршруту '/products/'. Разрешен метод GET. Возвращает список товаров, либо карточку товара.
4. Корзина  
Заказ типа 'basket'. Всего в списке заказов может быть только один заказ со статусом "Корзина".  
Разрешены методы GET - для получения всего списка товаров, находящихся в корзине. POST для добавления товара в корзину и PATCH для изменения количества товара в корзине.
5. Подтверждение заказа  
Доступен по маршруту: 'confirm_order'. Разрешен метода пост. На вход принимает JSON с данными контактного лица, а также, адресом. В разделе данных конаткта указывается ID заказа, который необходимо подтвердить.  
После успешного ввода всех обязательных данных возвращает статус, что заказ создан и перенаправляет на форму "спасибо за заказ".
6. Форма "Спасибо за заказ".  
Доступна по маршруту 'orders' для заказов со статусом 'confirmed/order.id'
7. История заказов  
Доступна по маршруту 'orders' - отображает список заказов, кроме заказов со статусом 'basket'.
8. Заказ  
Доступна по маршруту 'orders/order.id' для всех заказов, кроме тех что имеют статус 'basket'.

В проекте доступна авторизация через социальные сети (модуль django-social-auth).
Для регистрации при помощи соц. сети VK необходимо:  
 - создать приложение VK с активным Open API
 - в environ указать VK_KEY (ID приложения) и VK_SECRET (Защищённый ключ приложения)
Для авторизации используется маршрут '/login/vk-oauth2'
Подробнее можно ознакомиться в документации: https://python-social-auth.readthedocs.io/en/latest/backends/vk.html

Для регистрации через Google необзодимо:
- создать API в https://console.cloud.google.com/apis/. Туториал: 
- 
http://127.0.0.1:8000/social-auth/login/google-oauth2/
http://127.0.0.1:8000/login/google-oauth2/